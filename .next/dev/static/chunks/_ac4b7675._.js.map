{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aryan/Desktop/New%20folder%20%283%29/PDF-GPT-1/lib/s3.ts"],"sourcesContent":["// src/lib/oracleBucket.ts\r\nimport { S3 } from 'aws-sdk'\r\n\r\nexport async function uploadToS3(file: File) {\r\n  const s3 = new S3({\r\n    accessKeyId: process.env.NEXT_PUBLIC_OCI_ACCESS_KEY_ID!,\r\n    secretAccessKey: process.env.NEXT_PUBLIC_OCI_SECRET_ACCESS_KEY!,\r\n    endpoint: process.env.NEXT_PUBLIC_OCI_ENDPOINT!,  // Oracle S3 endpoint\r\n    s3ForcePathStyle: true,\r\n    signatureVersion: 'v4',\r\n    region: process.env.NEXT_PUBLIC_OCI_REGION!,\r\n  })\r\n\r\n  const fileKey = `${Date.now()}-${file.name.replace(/\\s+/g, '-')}`\r\n\r\n  await s3\r\n    .putObject({\r\n      Bucket: process.env.NEXT_PUBLIC_OCI_BUCKET_NAME!,\r\n      Key: fileKey,\r\n      Body: file,\r\n      ContentType: file.type,\r\n    })\r\n    .promise()\r\n\r\n  return fileKey\r\n}\r\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;;AAKT;AAJjB;;AAEO,eAAe,WAAW,IAAU;IACzC,MAAM,KAAK,IAAI,+MAAE,CAAC;QAChB,WAAW;QACX,eAAe;QACf,QAAQ;QACR,kBAAkB;QAClB,kBAAkB;QAClB,MAAM;IACR;IAEA,MAAM,UAAU,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,IAAI,CAAC,OAAO,CAAC,QAAQ,MAAM;IAEjE,MAAM,GACH,SAAS,CAAC;QACT,MAAM;QACN,KAAK;QACL,MAAM;QACN,aAAa,KAAK,IAAI;IACxB,GACC,OAAO;IAEV,OAAO;AACT","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aryan/Desktop/New%20folder%20%283%29/PDF-GPT-1/app/utils.ts"],"sourcesContent":["export async function createChat(\r\n  fileKey: string\r\n): Promise<'error' | 'success'> {\r\n  const res = await fetch(process.env.NEXT_PUBLIC_URL + '/api/create-chat', {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ fileKey }),\r\n  })\r\n\r\n  const data = await res.json()\r\n  if (data.error) throw new Error('Error creating chat')\r\n\r\n  return data.chatId\r\n}"],"names":[],"mappings":";;;;AAG0B;AAHnB,eAAe,WACpB,OAAe;IAEf,MAAM,MAAM,MAAM,MAAM,4DAA8B,oBAAoB;QACxE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;QAAQ;IACjC;IAEA,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,IAAI,KAAK,KAAK,EAAE,MAAM,IAAI,MAAM;IAEhC,OAAO,KAAK,MAAM;AACpB","debugId":null}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aryan/Desktop/New%20folder%20%283%29/PDF-GPT-1/app/file-upload.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { uploadToS3 } from '@/lib/s3'\r\nimport { Inbox, Loader2 } from 'lucide-react'\r\nimport { useState } from 'react'\r\nimport { useDropzone } from 'react-dropzone'\r\nimport { toast } from 'react-hot-toast'\r\nimport { createChat } from './utils'\r\nimport { useRouter } from 'next/navigation'\r\n\r\nconst FileUpload = () => {\r\n  const [isUploading, setIsUploading] = useState(false)\r\n  const [isCreatingChat, setIsCreatingChat] = useState(false)\r\n  const router = useRouter()\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: {\r\n      'application/pdf': ['.pdf'],\r\n    },\r\n    maxFiles: 1,\r\n    onDrop: async (acceptedFiles) => {\r\n      const file = acceptedFiles[0]\r\n      if (file.size > 10 * 1024 * 1024) {\r\n        toast.error('File too large (limit: 10MB)')\r\n        return\r\n      }\r\n\r\n      try {\r\n        setIsUploading(true)\r\n        const fileKey = await uploadToS3(acceptedFiles[0])\r\n        console.log(\"fileKey\", fileKey);\r\n        toast.success('File uploaded successfully!')\r\n\r\n        setIsCreatingChat(true)\r\n        const chatId = await createChat(fileKey)\r\n        toast.success('Chat created successfully!')\r\n\r\n        router.push(`/chat/${chatId}`)\r\n      } catch (err) {\r\n        toast.error('Something went wrong ...')\r\n        console.log(err)\r\n      } finally {\r\n        setIsUploading(false)\r\n        setIsCreatingChat(false)\r\n      }\r\n    },\r\n  })\r\n\r\n  return (\r\n    <div className=\"p-2 bg-white rounded-2xl\">\r\n      <div\r\n        {...getRootProps({\r\n          className:\r\n            'border-dashed border-2 rounded-xl cursor-pointer bg-gray-50 py-8 flex justify-center items-center flex-col hover:border-blue-300 focus:border-blue-300 focus:border-solid outline-none',\r\n        })}\r\n      >\r\n        <input {...getInputProps()} />\r\n        {isUploading || isCreatingChat ? (\r\n          <>\r\n            <Loader2 className=\"w-10 h-10 text-blue-500 animate-spin\" />\r\n            <p className=\"mt-2 text-sm text-slate-400\">Uploading...</p>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Inbox className=\"w-10 h-10 text-blue-500\" />\r\n            <p className=\"mt-2 text-sm text-slate-400\">Drop PDF Here</p>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FileUpload"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;AARA;;;;;;;;AAUA,MAAM,aAAa;;IACjB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,wRAAQ,EAAC;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,wRAAQ,EAAC;IACrD,MAAM,SAAS,IAAA,iQAAS;IAExB,MAAM,EAAE,YAAY,EAAE,aAAa,EAAE,GAAG,IAAA,+QAAW,EAAC;QAClD,QAAQ;YACN,mBAAmB;gBAAC;aAAO;QAC7B;QACA,UAAU;QACV,MAAM;sCAAE,OAAO;gBACb,MAAM,OAAO,aAAa,CAAC,EAAE;gBAC7B,IAAI,KAAK,IAAI,GAAG,KAAK,OAAO,MAAM;oBAChC,4QAAK,CAAC,KAAK,CAAC;oBACZ;gBACF;gBAEA,IAAI;oBACF,eAAe;oBACf,MAAM,UAAU,MAAM,IAAA,0HAAU,EAAC,aAAa,CAAC,EAAE;oBACjD,QAAQ,GAAG,CAAC,WAAW;oBACvB,4QAAK,CAAC,OAAO,CAAC;oBAEd,kBAAkB;oBAClB,MAAM,SAAS,MAAM,IAAA,6HAAU,EAAC;oBAChC,4QAAK,CAAC,OAAO,CAAC;oBAEd,OAAO,IAAI,CAAC,CAAC,MAAM,EAAE,QAAQ;gBAC/B,EAAE,OAAO,KAAK;oBACZ,4QAAK,CAAC,KAAK,CAAC;oBACZ,QAAQ,GAAG,CAAC;gBACd,SAAU;oBACR,eAAe;oBACf,kBAAkB;gBACpB;YACF;;IACF;IAEA,qBACE,4SAAC;QAAI,WAAU;kBACb,cAAA,4SAAC;YACE,GAAG,aAAa;gBACf,WACE;YACJ,EAAE;;8BAEF,4SAAC;oBAAO,GAAG,eAAe;;;;;;gBACzB,eAAe,+BACd;;sCACE,4SAAC,mTAAO;4BAAC,WAAU;;;;;;sCACnB,4SAAC;4BAAE,WAAU;sCAA8B;;;;;;;iDAG7C;;sCACE,4SAAC,oSAAK;4BAAC,WAAU;;;;;;sCACjB,4SAAC;4BAAE,WAAU;sCAA8B;;;;;;;;;;;;;;;;;;;AAMvD;GA7DM;;QAGW,iQAAS;QAEgB,+QAAW;;;KAL/C;uCA+DS","debugId":null}}]
}